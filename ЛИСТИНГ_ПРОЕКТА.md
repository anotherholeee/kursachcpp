# ЛИСТИНГ ПРОЕКТА: Система управления футбольной командой

## Структура проекта

### 1. Базовые классы и структуры данных

#### `List.h` / `List_Node.h`
**Назначение:** Реализация двусвязного списка (шаблонный класс)
- Класс `List<T>` - контейнер для хранения элементов
- Класс `List_Node<T>` - узел списка
- Итераторы для обхода элементов
- Методы: `push_back`, `push_front`, `remove`, `find`, `contains`
- Оператор индексации `operator[]`

#### `dynamic_array.h` / `dynamic_array.tpp`
**Назначение:** Реализация динамического массива (шаблонный класс)

#### `exceptions.h` / `exceptions.cpp`
**Назначение:** Иерархия исключений
- `FootballException` - базовый класс исключений
- `InvalidDataException` - неверные данные
- `FileIOException` - ошибки файлового ввода/вывода
- `PlayerNotFoundException` - игрок не найден
- `ContainerException` - ошибки контейнера
- `DataValidationException` - ошибки валидации данных
- `UndoException` - ошибки undo/redo операций

---

### 2. Классы участников команды

#### `team_member.h` / `team_member.cpp`
**Назначение:** Базовый класс для всех участников команды
- Поля: `id`, `surname`, `name`, `patronymic`, `age`, `salary`, `type`
- Виртуальные методы: `calculatePerformance()`, `toFileString()`, `fromFileString()`
- Операторы сравнения: `==`, `!=`, `<`, `>`
- Перегрузка операторов ввода/вывода

#### `player.h` / `player.cpp`
**Назначение:** Класс игрока (наследуется от `Team_member`)
- Поля: `number`, `position`, `weight`, `growth`, `goals`, `matches`
- Рейтинги: `rating`, `attack_rating`, `defense_rating`, `physics_rating`, `text_rating`
- Методы валидации данных

#### `striker.h` / `striker.cpp`
**Назначение:** Класс нападающего (наследуется от `Player`)
- Поля: `implementation_percentage`, `offsides`, `shots_target`

#### `defender.h` / `defender.cpp`
**Назначение:** Класс защитника (наследуется от `Player`)
- Поля: `blocking`, `interceptions`, `successful_selections`

#### `midfielder.h` / `midfielder.cpp`
**Назначение:** Класс полузащитника (наследуется от `Player`)
- Поля: `game_tempo_control`, `line_linking`, `vertical_passing`

#### `goalkeeper.h` / `goalkeeper.cpp`
**Назначение:** Класс вратаря (наследуется от `Player`)
- Поля: `save`, `game_angle`, `reaction`, `goals_conceded`, `reflected_penalties`

#### `coach.h` / `coach.cpp`
**Назначение:** Класс тренера (наследуется от `Team_member`)
- Поля: `license`, `specialization`, `experience_age`, `performance_rating`, `performance_text`

#### `head_coach.h` / `head_coach.cpp`
**Назначение:** Класс главного тренера (наследуется от `Coach`)
- Поля: `victories`, `trophies`, `seasons`, `trained_players`

#### `assistant.h` / `assistant.cpp`
**Назначение:** Класс помощника тренера (наследуется от `Coach`)
- Поля: `reports`, `trainings`, `trained_players`

#### `goalkeeper_coach.h` / `goalkeeper_coach.cpp`
**Назначение:** Класс тренера вратарей (наследуется от `Coach`)
- Поля: `trained_goalkeepers`, `saves_improved`, `trainings`

---

### 3. Классы команд и составов

#### `team.h` / `team.cpp`
**Назначение:** Класс футбольной команды
- Поля: `id`, `name`, `city`, `stadium`, `foundedYear`, `teamRating`
- Контейнеры: `List<int> playerIds`, `List<int> coachIds`
- Методы управления: `addPlayer()`, `removePlayer()`, `addCoach()`, `removeCoach()`
- Сериализация: `toFileString()`, `fromFileString()`, `serializeBinary()`, `deserializeBinary()`

#### `team_registry.h` / `team_registry.cpp`
**Назначение:** Контейнер для управления командами
- Хранилище: `std::map<int, Team> teams`
- Итераторы для обхода команд
- CRUD операции: `addTeam()`, `removeTeam()`, `getTeam()`, `hasTeam()`
- Поиск: `findByName()`, `findByCity()`
- Работа с файлами: `loadFromDirectory()`, `saveToDirectory()`

#### `player_roster.h`
**Назначение:** Контейнер для управления составом игроков команды
- Хранилище: `List<Player*> players`
- CRUD операции: `addPlayer()`, `removePlayer()`, `getPlayer()`, `hasPlayer()`
- Поиск: `findByPosition()`, `findByAgeRange()`, `findByRatingRange()`, `findByName()`

---

### 4. Система достижений

#### `achievement.h` / `achievement.cpp`
**Назначение:** Класс достижения игрока
- Поля: `id`, `playerId`, `type`, `title`, `description`, `date`, `weight`, `points`
- Enum: `AchievementType` (GOAL_SCORED, ASSIST, CLEAN_SHEET, MATCH_WON, CHAMPIONSHIP_WIN, AWARD, RECORD)
- Сериализация: `toFileString()`, `fromFileString()`, `serializeBinary()`, `deserializeBinary()`
- Операторы сравнения

#### `achievement_catalog.h` / `achievement_catalog.cpp`
**Назначение:** Каталог достижений
- Хранилище: `std::map<int, Achievement> achievements`
- Индекс: `std::map<int, List<int>> playerAchievements`
- Итераторы: `Iterator`, `PlayerAchievementIterator`
- CRUD операции: `addAchievement()`, `removeAchievement()`, `getAchievement()`
- Поиск: `findByType()`, `findByDateRange()`, `getPlayerAchievements()`
- Работа с файлами: `loadFromDirectory()`, `saveToDirectory()`, `loadFromFile()`, `saveToFile()`

---

### 5. Система команд (Command Pattern)

#### `command.h`
**Назначение:** Базовый класс команды и менеджер истории
- Класс `Command` - базовый класс для всех команд
- Класс `CommandHistory` - менеджер истории команд для undo/redo
- Методы: `execute()`, `undo()`, `getDescription()`
- История команд: `addCommand()`, `undo()`, `redo()`, `canUndo()`, `canRedo()`

#### `commands.h`
**Назначение:** Конкретные реализации команд
- `AddTeamCommand` - добавление команды
- `RemoveTeamCommand` - удаление команды
- `AddPlayerToTeamCommand` - добавление игрока в команду
- `RemovePlayerFromTeamCommand` - удаление игрока из команды
- `AddAchievementCommand` - добавление достижения
- `RemoveAchievementCommand` - удаление достижения
- Валидация данных в каждой команде

---

### 6. Алгоритмы и фильтры

#### `algorithm_template.h`
**Назначение:** Шаблонные классы алгоритмов
- `Algorithm<T, ResultType>` - базовый шаблонный класс алгоритмов
- `FilterAlgorithm<T>` - специализация для фильтрации (возвращает bool)
- Поддержка лямбда-функций через `std::function`
- Методы: `execute()`, `applyToList()`, `filterList()`

#### `search_filter.h`
**Назначение:** Система фильтров и поиска
- Базовый класс `Filter<T>`
- Фильтры: `AgeFilter`, `PositionFilter`, `RatingFilter`, `TeamFilter`, `NameFilter`
- Комбинированный фильтр: `CombinedFilter<T>`
- Класс `SearchEngine` - поиск игроков
- Методы: `search()`, `searchWithLambda()`, `searchByName()`, `searchByAge()`, `searchByPosition()`, `searchByRating()`, `searchCombined()`

#### `rating_calculator.h`
**Назначение:** Расчет рейтинга игроков на основе достижений
- Структура `Rating` - результат расчета рейтинга
- Структура `PlayerRatingPair` - пара игрок-рейтинг
- Шаблонный класс `RatingCalculationAlgorithm<PlayerType>`
- Функция `calculatePlayerRating()` - расчет рейтинга
- Учет весовых коэффициентов для разных типов достижений

#### `algorithm_examples.h`
**Назначение:** Примеры использования алгоритмов
- Примеры использования `Algorithm` с лямбда-функциями
- Примеры использования `FilterAlgorithm`
- Примеры использования `SearchEngine`
- Примеры использования `RatingCalculationAlgorithm`

---

### 7. Резервное копирование

#### `backup_manager.h` / `backup_manager.cpp`
**Назначение:** Менеджер резервного копирования
- Класс `BackupManager`
- Методы: `backupTeams()`, `backupAchievements()`, `createFullBackup()`, `autoBackup()`
- Генерация имен файлов с временными метками

---

### 8. Пользовательский интерфейс (Qt)

#### `main_qt.cpp`
**Назначение:** Точка входа Qt-приложения
- Инициализация QApplication
- Создание необходимых директорий
- Запуск главного окна

#### `MainWindow.h` / `MainWindow.cpp` (предполагается)
**Назначение:** Главное окно приложения
- Класс `MainWindow` - основное окно с вкладками
- Диалоги:
  - `TeamDialog` - добавление/редактирование команды
  - `PlayerDialog` - добавление/редактирование игрока
  - `CoachDialog` - добавление/редактирование тренера
  - `AchievementDialog` - добавление достижения
  - `SearchDialog` - поиск игроков
- Вкладки:
  - Команды (`teamsTab`)
  - Игроки (`playersTab`)
  - Тренеры (`coachesTab`)
  - Достижения (`achievementsTab`)
  - Поиск (`searchTab`)
  - Рейтинги (`ratingsTab`)
- Функциональность:
  - CRUD операции для всех сущностей
  - Поиск и фильтрация
  - Расчет рейтингов
  - Undo/Redo
  - Сохранение/загрузка данных

---

## Основные компоненты системы

### Контейнеры данных
1. **TeamRegistry** - реестр команд
2. **PlayerRoster** - состав игроков команды
3. **AchievementCatalog** - каталог достижений
4. **List<T>** - двусвязный список (пользовательская реализация)

### Паттерны проектирования
1. **Command Pattern** - для операций undo/redo
2. **Strategy Pattern** - для алгоритмов (через шаблоны)
3. **Iterator Pattern** - для обхода контейнеров
4. **Template Method** - для алгоритмов расчета

### Иерархия классов

```
Team_member (базовый класс)
├── Player
│   ├── Striker
│   ├── Defender
│   ├── Midfielder
│   └── Goalkeeper
└── Coach
    ├── Head_coach
    ├── Assistant
    └── Goalkeeper_coach
```

### Основные алгоритмы
1. **Поиск игроков** - через `SearchEngine` с фильтрами
2. **Расчет рейтинга** - через `RatingCalculationAlgorithm`
3. **Фильтрация** - через `FilterAlgorithm` и лямбда-функции
4. **Обработка данных** - через шаблонный `Algorithm`

---

## Файлы данных

### Структура хранения
- **Команды**: директория `teams/` (файлы `.team`)
- **Игроки**: директория `players/` (файлы `.player`)
- **Тренеры**: директория `coaches/` (файлы `.coach`)
- **Достижения**: файл `achievements.txt` или директория `achievements/` (файлы `.achv`)
- **Резервные копии**: директория `backups/`

### Формат данных
- Текстовый формат с разделителем `|`
- Бинарная сериализация (для некоторых классов)
- Каждая строка файла - одна запись

---

## Зависимости

### Стандартная библиотека C++
- `<iostream>`, `<fstream>`, `<sstream>`
- `<string>`, `<vector>`, `<map>`, `<deque>`
- `<algorithm>`, `<functional>`
- `<ctime>`, `<filesystem>`
- `<memory>`, `<stdexcept>`

### Внешние библиотеки
- **Qt Framework** (для GUI)
  - `QMainWindow`, `QWidget`, `QDialog`
  - `QTableWidget`, `QPushButton`, `QLineEdit`
  - `QTabWidget`, `QVBoxLayout`, `QHBoxLayout`

---

## Основные функции системы

1. **Управление командами**
   - Добавление/удаление/редактирование команд
   - Управление составом (игроки и тренеры)

2. **Управление игроками**
   - CRUD операции для игроков разных позиций
   - Хранение статистики и рейтингов

3. **Управление тренерами**
   - CRUD операции для тренеров разных типов
   - Хранение статистики работы

4. **Система достижений**
   - Добавление достижений игрокам
   - Поиск и фильтрация достижений
   - Расчет рейтинга на основе достижений

5. **Поиск и фильтрация**
   - Поиск игроков по различным критериям
   - Комбинированные фильтры
   - Использование лямбда-функций

6. **Расчет рейтингов**
   - Расчет рейтинга на основе достижений
   - Учет весовых коэффициентов
   - Фильтрация по временным периодам

7. **Undo/Redo**
   - Отмена и повтор операций
   - История команд

8. **Резервное копирование**
   - Автоматическое создание резервных копий
   - Восстановление данных

---

## Статистика проекта

- **Классов**: ~30+
- **Файлов заголовков**: ~25
- **Файлов реализации**: ~25
- **Шаблонных классов**: 3+ (List, Algorithm, FilterAlgorithm)
- **Исключений**: 7 типов
- **Паттернов проектирования**: 4+

---

## Примечания

1. Все классы используют пользовательский контейнер `List<T>` вместо стандартных STL контейнеров (где возможно)
2. Реализована полная система исключений с логированием
3. Поддержка бинарной и текстовой сериализации
4. Использование умных указателей (`std::shared_ptr`, `std::unique_ptr`) где необходимо
5. Шаблонное программирование для алгоритмов и фильтров
6. Поддержка лямбда-функций в алгоритмах

